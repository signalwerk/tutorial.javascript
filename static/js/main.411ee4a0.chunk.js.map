{"version":3,"sources":["Components/Preview/addInfiniteLoopProtection.js","Components/Preview/index.tsx","Components/WorkSpace/index.tsx","Components/Callout/index.tsx","Components/StatusIcon/index.tsx","Components/Markdown/index.tsx","util/usePrevious.ts","util/useFetch.ts","context/session.tsx","context/course.tsx","util/api.js","Components/CapterMenu/index.tsx","Components/StepMenu/index.tsx","Components/Track/index.tsx","Components/VideoPlayer/index.tsx","Components/TextPlayer/index.tsx","Components/VideoPlayer/useVideojs.tsx","Components/Player/index.tsx","Components/Editor/index.tsx","Components/Content/index.tsx","Components/Viewer/index.tsx","Components/Debug/index.tsx","Components/Button/index.tsx","Components/Admin/index.tsx","Components/Version/index.tsx","Components/Home/index.tsx","reportWebVitals.ts","index.tsx","Components/Editor/editor.jsx"],"names":["esprima","require","boxList","textList","renderError","Preview","code","check","hideErrors","match","themeNetative","solved","useState","boxes","setBoxes","texts","setTexts","error","setError","Box","x","y","width","height","print","text","conzole","log","hasBox","filter","item","found","length","getBoxList","hasText","getTextList","complete","status","render","sanitizedCode","count","loopId","patches","varPrefix","checkStr","parse","tolerant","range","jsx","node","type","start","body","end","prolog","replace","epilog","push","pos","str","sort","a","b","forEach","patch","slice","addInfiniteLoopProtection","e","line","console","name","message","lineNumber","err","description","execCode","Function","regex","test","codeTester","runCodeWithDateFunction","useEffect","className","viewBox","fill","xmlns","textAnchor","map","index","JSON","stringify","WorkSpace","children","preview","focus","Callout","done","next","to","StatusIcon","obj2jsx","token","key","mdTypes","INLINE_CODE","value","EMPHASIS","STRONG","LINK","href","url","target","rel","TEXT","Markdown","tokens","fromMarkdown","usePrevious","ref","useRef","current","initialState","data","isLoading","fetchReducer","state","action","payload","useFetch","Action","options","previousUrl","useReducer","dispatch","getFetchResult","useCallback","fetch","then","response","ok","json","Error","statusText","catch","loading","hasError","editor","selection","content","progress","reducer","SET_CURRENT_STEP_PROGRESS","chapter","step","newPorgress","set","SET_CURRENT_CHAPTER_PROGRESS","SET_PROGRESS","SET_EDITOR_CONTENT","SET_EDITOR_SELECTION","SET_EDITOR_FOCUS","Context","createContext","Provider","localStorage","getItem","setItem","base","process","REACT_APP_DEV","pkg","homepage","URL","course","movie","ROUTE","chapters","lang","ADD_LANG","SET_CHAPTERS","CapterMenuItem","active","CapterMenu","useContext","SessionContext","appState","CourseContext","useParams","id","title","StepMenuItem","StepMenu","steps","Track","max","onChange","min","Math","round","values","renderTrack","props","style","renderThumb","VideoPlayer","PartType","update","onTimeUpdate","src","isPlaying","setPlaying","isMuted","setMute","duration","setDuration","durationFormat","setDurationFormat","playPosition","setPlayPosition","isInitial","setInitial","player","updatePosition","videoNodeRef","autoplay","onReady","onPlay","onPause","onSeeking","onLoadedmetadata","onSeeked","onEnd","previousSrc","previousAutoplay","_initPlayer","_initPlayerEvents","_changeSrc","_unregisterEvents","undefined","_changeAutoplay","videojs","currentTime","previousTime","position","ready","on","off","one","completeTime","floor","useVideojs","controls","responsive","bigPlayButtonCentered","html5","hls","overrideNative","nativeAudioTracks","nativeVideoTracks","p","totalTime","togglePlayback","pause","play","playPositionFormat","formatTime","data-vjs-player","t","timestamp","onClick","muted","showPart","part","MARK","TEXT_SELECTED","showLines","hasCursor","offset","split","parts","lineIndex","partIndex","TextPlayer","styles","highlight","dangerouslySetInnerHTML","__html","languages","js","aria-hidden","Player","setPos","editorFrames","editorFramePosPos","array","predicate","l","findLastIndex","time","editorFramePos","Editor","solution","inputEl","preClassName","textareaClassName","onFocus","SessionAction","onBlur","onSelect","selectionStart","selectionEnd","onValueChange","val","Content","findNextIndex","findIndex","Viewer","chapterURL","currentStepData","find","currentStepProgress","isSolved","nextStepIndex","nextChapterIndex","task","instruction","finished","completeSteps","isChapterComplete","Button","srcBlob","audio","createObjectURL","event","saveAs","LiveStreamPreview","stream","videoPreviewRef","React","srcObject","autoPlay","record","Admin","recording","setRecording","setPreview","useMediaRecorder","blobOptions","audioBitsPerSecond","videoBitsPerSecond","mediaStreamConstraints","video","mediaBlob","stopRecording","getMediaStream","clearMediaStream","startRecording","liveStream","now","Date","reader","FileReader","readAsDataURL","onloadend","base64dataURI","result","toString","base64data","substr","indexOf","method","fillRule","clipRule","d","fillOpacity","trim","version","Intl","DateTimeFormat","year","month","day","hour","minute","format","parseInt","Version","Home","reportWebVitals","onPerfEntry","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","StrictMode","exact","path","Debug","document","getElementById","KEYCODE_Z","KEYCODE_BRACKETS","KEYCODE_QUOTE","KEYCODE_BACK_QUOTE","HISTORY_LIMIT","HISTORY_TIME_GAP","isWindows","global","navigator","platform","isMacLike","cssText","capture","_recordCurrentState","input","_input","_recordChange","_getLines","substring","overwrite","_history","stack","extras","last","re","previous","pop","startsWith","_updateInput","_applyEdits","_undoEdit","_redoEdit","_handleKeyDown","tabSize","insertSpaces","ignoreTabKey","onKeyDown","defaultPrevented","keyCode","blur","tabCharacter","repeat","preventDefault","shiftKey","linesBeforeCaret","startLine","endLine","nextValue","i","join","startLineText","updatedSelection","hasSelection","endsWith","matches","indent","chars","metaKey","ctrlKey","altKey","setState","_handleChange","this","history","session","padding","textareaId","autoFocus","disabled","form","maxLength","minLength","placeholder","readOnly","required","onKeyUp","rest","contentStyle","paddingTop","paddingRight","paddingBottom","paddingLeft","highlighted","container","c","textarea","autoCapitalize","autoComplete","autoCorrect","spellCheck","data-gramm","defaultProps","textAlign","boxSizing","overflow","top","left","resize","color","MozOsxFontSmoothing","WebkitFontSmoothing","WebkitTextFillColor","pointerEvents","margin","border","background","display","fontFamily","fontSize","fontStyle","fontVariantLigatures","fontWeight","letterSpacing","lineHeight","textIndent","textRendering","textTransform","whiteSpace","wordBreak","overflowWrap"],"mappings":"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","file":"static/js/main.411ee4a0.chunk.js","sourcesContent":["// reference:\n// https://gist.github.com/chriscoyier/b805fe91cc832fc97a3af671051e501f\n// https://github.com/chinchang/web-maker/blob/master/src/utils.js\n\nvar esprima = require(\"esprima\");\n\n/**\n * Adds timed limit on the loops found in the passed code.\n * Contributed by Ariya Hidayat!\n * @param code {string}\tCode to be protected from infinite loops.\n */\nexport function addInfiniteLoopProtection(code, { count }) {\n  var loopId = 1;\n  var patches = [];\n  var varPrefix = \"__jsLoopProtect\";\n  var varStr = \"var %d = 0;\\n\";\n  var checkStr = `\\nif (++%d > ${count}) { throw new Error(\"Infinite loop (max. ${count})\"); break; }\\n`;\n\n  esprima.parse(\n    code,\n    {\n      tolerant: true,\n      range: true,\n      jsx: true,\n    },\n    function (node) {\n      switch (node.type) {\n        case \"DoWhileStatement\":\n        case \"ForStatement\":\n        case \"ForInStatement\":\n        case \"ForOfStatement\":\n        case \"WhileStatement\":\n          var start = 1 + node.body.range[0];\n          var end = node.body.range[1];\n          var prolog = checkStr.replace(\"%d\", varPrefix + loopId);\n          var epilog = \"\";\n\n          if (node.body.type !== \"BlockStatement\") {\n            // `while(1) doThat()` becomes `while(1) {doThat()}`\n            prolog = \"{\" + prolog;\n            epilog = \"}\";\n            --start;\n          }\n\n          patches.push({\n            pos: start,\n            str: prolog,\n          });\n          patches.push({\n            pos: end,\n            str: epilog,\n          });\n          patches.push({\n            pos: node.range[0],\n            str: varStr.replace(\"%d\", varPrefix + loopId),\n          });\n          ++loopId;\n          break;\n\n        default:\n          break;\n      }\n    }\n  );\n\n  /* eslint-disable no-param-reassign */\n  patches\n    .sort(function (a, b) {\n      return b.pos - a.pos;\n    })\n    .forEach(function (patch) {\n      code = code.slice(0, patch.pos) + patch.str + code.slice(patch.pos);\n    });\n\n  /* eslint-disable no-param-reassign */\n  return code;\n}\n","import React, { useState, useEffect } from \"react\";\nimport { addInfiniteLoopProtection } from \"./addInfiniteLoopProtection\";\nimport \"./styles.css\";\n\ntype PreviewProps = {\n  code: string;\n  check?: string;\n  match?: string;\n  hideErrors?: boolean;\n  themeNetative?: boolean;\n  solved?: Function;\n};\n\ntype Box = {\n  x?: number;\n  y?: number;\n  width?: number;\n  height?: number;\n};\n\ntype Text = string;\n\nlet boxList: Box[] = [];\nlet textList: Text[] = [];\nlet renderError = \"\";\n\nfunction Preview({\n  code,\n  check,\n  match,\n  hideErrors,\n  themeNetative,\n  solved,\n}: PreviewProps) {\n  const [boxes, setBoxes] = useState<Box[]>([]);\n  const [texts, setTexts] = useState<Text[]>([]);\n  const [error, setError] = useState(\"\");\n\n  function Box(x = 0, y = 0, width = 100, height = 100) {\n    boxList = [\n      ...boxList,\n      {\n        x: x,\n        y: y,\n        width,\n        height,\n      },\n    ];\n  }\n\n  function print(text = \"\") {\n    textList = [...textList, text];\n  }\n\n  const conzole = {\n    log: (text = \"\") => {\n      textList = [...textList, text];\n    },\n  };\n\n  function hasBox(x?: number, y?: number, width?: number, height?: number) {\n    return boxList.filter((item) => {\n      let found = true;\n\n      if (x) {\n        found = item.x === x && found;\n      }\n      if (y) {\n        found = item.y === y && found;\n      }\n      if (width) {\n        found = item.width === width && found;\n      }\n      if (height) {\n        found = item.height === height && found;\n      }\n\n      return found;\n    }).length;\n  }\n\n  function getBoxList() {\n    return boxList;\n  }\n  function hasText(filter: any) {\n    if (typeof filter === \"function\") {\n      return textList.filter(filter).length;\n    } else {\n      return textList.filter((item) => item === filter).length;\n    }\n  }\n\n  function codeTester(code: string) {\n    return (regex: RegExp) => {\n      return regex.test(code);\n    };\n  }\n\n  function getTextList() {\n    return textList;\n  }\n\n  function complete(status: boolean) {\n    if (solved) {\n      solved(status);\n    }\n  }\n\n  const render = (code: string, check: string | undefined) => {\n    if (!code) {\n      solved && solved(false);\n      return;\n    }\n    function runCodeWithDateFunction(sanitizedCode: string) {\n      let execCode = `\nreturn (\n  function(Box, print, hasBox, getBoxList, hasText, getTextList, complete, console, codeTester){ \n\n    ${sanitizedCode}\n\n    ${\n      check\n        ? `try { ( ${check} ) ? complete(true) : complete(false) } catch(e) { complete(false) }`\n        : \"\"\n    }\n  }\n)`;\n\n      try {\n        // eslint-disable-next-line\n        Function(execCode)()(\n          Box,\n          print,\n          hasBox,\n          getBoxList,\n          hasText,\n          getTextList,\n          complete,\n          conzole,\n          codeTester(code)\n        );\n      } catch (e) {\n        complete(false);\n        renderError = e.name + \": \" + e.message;\n      }\n    }\n\n    let sanitizedCode = \"\";\n    try {\n      sanitizedCode = addInfiniteLoopProtection(code, { count: 500 });\n    } catch (e) {\n      var line = 1;\n      console.log(\"-- error\", e);\n      renderError = e.name + \": \" + e.message;\n\n      try {\n        line = e.lineNumber;\n      } catch (err) {\n        // go on with line number 1\n      }\n\n      console.log({\n        code,\n        error: e.description,\n        line: line,\n      });\n    }\n\n    runCodeWithDateFunction(sanitizedCode);\n  };\n\n  useEffect(() => {\n    boxList = [];\n    textList = [];\n    renderError = \"\";\n    render(code, check);\n    setBoxes(boxList);\n    setTexts(textList);\n    setError(renderError);\n  }, [code, check]);\n\n  return (\n    <div className={themeNetative ? \"preview preview--negative\" : \"preview\"}>\n      <div className=\"preview__view\">\n        <svg\n          width=\"215\"\n          height=\"302\"\n          viewBox=\"-2.5 -2.5 215 302\"\n          fill=\"none\"\n          xmlns=\"http://www.w3.org/2000/svg\"\n        >\n          <rect className=\"svg__rect svg__paper\" width=\"210\" height=\"297\" />\n\n          <text className=\"svg__text code\" textAnchor=\"end\" x=\"205\" y=\"18\">\n            A4\n          </text>\n\n          {boxes.map((item, index) => (\n            <rect\n              key={index}\n              className=\"svg__rect\"\n              x={item.x}\n              y={item.y}\n              width={item.width}\n              height={item.height}\n            />\n          ))}\n        </svg>\n        {/* \n        <pre>\n          <code>{JSON.stringify(boxes, null, 2)}</code>\n        </pre>\n         */}\n      </div>\n      {texts.length > 0 && (\n        <div className=\"preview__console code\">\n          <pre>\n            {texts.map((text, index) => (\n              <code key={index}>\n                {JSON.stringify(text)}\n                {\"\\n\"}\n              </code>\n            ))}\n          </pre>\n        </div>\n      )}\n      {error && !hideErrors && (\n        <div className=\"preview__error\">\n          <p>⚠️ Der Code hat im Moment noch Fehler.</p>\n          <div className=\"preview__debug\">\n            <code>{error}</code>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n\nexport default Preview;\n","import \"./styles.css\";\nimport Preview from \"../Preview\";\n\ntype WorkSpaceProps = {\n  preview: string;\n  check?: string;\n  // filename: string;\n  children: React.ReactNode;\n  hideErrors?: boolean;\n  focus?: boolean;\n  solved: Function;\n};\n\nfunction WorkSpace({\n  children,\n  preview,\n  check,\n  hideErrors,\n  focus,\n  solved,\n}: WorkSpaceProps) {\n  return (\n    <div className={`work-space work-space--${focus ? \"focus\" : \"blur\"}`}>\n      <div className=\"work-space__file\">{children}</div>\n      <div className=\"work-space__canvas\">\n        <Preview\n          code={preview}\n          check={check}\n          hideErrors={hideErrors}\n          themeNetative={true}\n          solved={solved}\n        />\n      </div>\n    </div>\n  );\n}\n\nexport default WorkSpace;\n","import React, { ReactNode } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport \"./styles.css\";\n\ntype CalloutProps = {\n  children: ReactNode;\n  done: boolean;\n  next: string;\n};\n\nfunction Callout({ children, done, next }: CalloutProps) {\n  return (\n    <div className={`callout callout--${done ? \"done\" : \"open\"}`}>\n      {children}\n\n      {done === true && (\n        <Link to={next}>\n          <div className=\"callout__next\">\n            <div className=\"callout__next-icon icon icon-right\"></div>\n            <h3 className=\"callout__next-text\">Nächste Aufgabe</h3>\n          </div>\n        </Link>\n      )}\n    </div>\n  );\n}\n\nexport default Callout;\n","import \"./styles.css\";\n\nfunction StatusIcon() {\n  return (\n    <span className={`status-icon status-icon--ok`}>\n      <span className={`icon icon-ok`} />\n    </span>\n  );\n}\n\nexport default StatusIcon;\n","import fromMarkdown, { mdToken, mdTypes } from \"mdast-util-from-span-markdown\";\nimport React from \"react\";\nimport \"./styles.css\";\n\nexport type markdownProps = {\n  text: string;\n};\n\nconst obj2jsx = (token: mdToken, key: number) => {\n  switch (token.type) {\n    case mdTypes.INLINE_CODE:\n      return <code key={key}>{token.value}</code>;\n    case mdTypes.EMPHASIS:\n    case mdTypes.STRONG:\n      return (\n        <em key={key}>\n          {token.children.map((item, index) => obj2jsx(item, index))}\n        </em>\n      );\n    case mdTypes.LINK:\n      return (\n        <a key={key} href={token.url} target=\"_blank\" rel=\"noreferrer\">\n          {token?.children.map((item, index) => obj2jsx(item, index))}\n        </a>\n      );\n    case mdTypes.TEXT:\n      return (\n        <span className=\"markdown__text\" key={key}>\n          {token.value}\n        </span>\n      );\n    default:\n      return <span>⚠️ no handling</span>;\n  }\n};\n\nconst Markdown = ({ text }: markdownProps) => {\n  const tokens = fromMarkdown(text);\n  return (\n    <span className=\"markdown\">\n      {tokens && tokens.map((token, index) => obj2jsx(token, index))}\n    </span>\n  );\n};\nexport default Markdown;\n","import { useRef, useEffect } from \"react\";\n\nexport default function usePrevious(value: any) {\n  const ref = useRef();\n\n  useEffect(() => {\n    ref.current = value;\n  }, [value]);\n\n  return ref.current;\n}\n","// https://usehooks-typescript.com/react-hook/use-fetch\n\nimport React, {\n  useState,\n  useEffect,\n  useReducer,\n  useCallback,\n  Reducer,\n  useRef,\n} from \"react\";\n\nimport usePrevious from \"./usePrevious\";\n\ninterface InitialState<T = any> {\n  data: T;\n  isLoading: boolean;\n  error: unknown;\n}\n\ntype ActionTypes<T> =\n  | { type: \"FETCH_START\" }\n  | { type: \"FETCH_SUCCESS\"; payload: InitialState<T>[\"data\"] }\n  | { type: \"FETCH_ERROR\"; payload: InitialState<T>[\"error\"] };\n\nconst initialState: InitialState = {\n  data: null,\n  isLoading: false,\n  error: null,\n};\n\ntype FetchReducer<T = any> = Reducer<InitialState<T>, ActionTypes<T>>;\n\nconst fetchReducer: FetchReducer = (state, action) => {\n  switch (action.type) {\n    case \"FETCH_START\": {\n      return { data: null, isLoading: true, error: null };\n    }\n    case \"FETCH_SUCCESS\": {\n      return { data: action.payload, isLoading: false, error: null };\n    }\n\n    case \"FETCH_ERROR\": {\n      return { data: null, isLoading: false, error: action.payload };\n    }\n    default:\n      return state;\n  }\n};\n\nfunction useFetch<T = unknown>(url: string, options?: object) {\n  const previousUrl = usePrevious(url);\n\n  const [state, dispatch] = useReducer<FetchReducer<T>>(\n    fetchReducer,\n    initialState\n  );\n\n  const getFetchResult = useCallback(async () => {\n    dispatch({ type: \"FETCH_START\" });\n\n    fetch(url, options)\n      .then((response) => {\n        if (response.ok) {\n          return response.json();\n        } else {\n          throw new Error(response.statusText);\n        }\n      })\n      .then((data: T) => {\n        dispatch({ type: \"FETCH_SUCCESS\", payload: (data as unknown) as T });\n      })\n      .catch(() => {\n        dispatch({ type: \"FETCH_ERROR\", payload: true });\n      });\n  }, [url]);\n\n  useEffect(() => {\n    getFetchResult();\n  }, [url]);\n\n  // let's not wait for the lifecycle\n  if (previousUrl !== url) {\n    return { response: null, loading: true, hasError: false };\n  }\n\n  return {\n    response: state.data,\n    loading: state.isLoading,\n    hasError: state.error,\n  };\n}\n\nexport default useFetch;\n","import React, {\n  Reducer,\n  createContext,\n  useReducer,\n  Dispatch,\n  useEffect,\n} from \"react\";\nimport { ActionMap } from \"./ActionMap\";\nimport { set } from \"lodash\";\n\nenum Action {\n  SET_PROGRESS = \"SET_PROGRESS\",\n  SET_CURRENT_STEP_PROGRESS = \"SET_CURRENT_STEP_PROGRESS\",\n  SET_CURRENT_CHAPTER_PROGRESS = \"SET_CURRENT_CHAPTER_PROGRESS\",\n  SET_EDITOR_CONTENT = \"SET_EDITOR_CONTENT\",\n  SET_EDITOR_SELECTION = \"SET_EDITOR_SELECTION\",\n  SET_EDITOR_FOCUS = \"SET_EDITOR_FOCUS\",\n}\n\nexport type Selection = {\n  start: number;\n  end: number;\n};\n\ntype ActionPayload = {\n  [Action.SET_CURRENT_STEP_PROGRESS]: {\n    chapter: string;\n    step: string;\n    value: boolean;\n  };\n  [Action.SET_CURRENT_CHAPTER_PROGRESS]: {\n    chapter: string;\n    value: boolean;\n  };\n  [Action.SET_PROGRESS]: {\n    progress: {\n      [key: string]: ChapterProgress;\n    };\n  };\n  [Action.SET_EDITOR_CONTENT]: {\n    chapter: string;\n    step: string;\n    value: string;\n  };\n  [Action.SET_EDITOR_SELECTION]: {\n    value: Selection;\n  };\n  [Action.SET_EDITOR_FOCUS]: {\n    value: boolean;\n  };\n};\n\nexport type Actions = ActionMap<ActionPayload>[keyof ActionMap<ActionPayload>];\n\n// type Task = {\n//   instruction: string;\n//   match: string;\n// };\n\ntype ChapterProgress = {\n  done: boolean;\n  steps: {\n    [key: string]: StepProgress;\n  };\n};\n\ntype StepProgress = {\n  done?: boolean;\n  editor?: Editor;\n};\n\nexport type EditorFrame = {\n  time: number;\n  editor: EditorState;\n};\n\nexport type Editor = {\n  content: string;\n};\n\nexport type EditorState = {\n  selection: Selection;\n  content: string;\n  focus: boolean;\n};\n\ntype Current = {\n  editor: EditorState;\n};\n\ntype State = {\n  current: Current;\n  progress?: {\n    [key: string]: ChapterProgress;\n  };\n};\n\nconst initialState: State = {\n  current: {\n    editor: {\n      selection: { start: 0, end: 0 },\n      content: \"\",\n      focus: false,\n    },\n  },\n  progress: {\n    // intro: { done: false, steps: [] },\n    // comments: { done: false, steps: [] },\n    // variables: { done: false, steps: [] },\n    // types: { done: false, steps: [] },\n    // operators: { done: false, steps: [] },\n    // functions: { done: false, steps: [] },\n    // itterations: { done: false, steps: [] },\n    // conditions: { done: false, steps: [] },\n    // \"advanced-types\": { done: false, steps: [] },\n    // intro: {\n    //   done: true,\n    //   steps: { overview: { done: true }, function: { done: true } },\n    // },\n    // comments: { done: true, steps: {} },\n    // variables: { done: true, steps: {} },\n    // types: { done: true, steps: {} },\n    // operators: { done: true, steps: {} },\n    // functions: { done: false, steps: { overview: { done: true } } },\n    // itterations: { done: false, steps: {} },\n    // conditions: { done: false, steps: {} },\n    // \"advanced-types\": { done: false, steps: {} },\n  },\n};\n\nconst reducer: Reducer<State, Actions> = (state, action) => {\n  switch (action.type) {\n    case Action.SET_CURRENT_STEP_PROGRESS:\n      return (() => {\n        const { chapter, step, value } = action.payload;\n        const newPorgress = set(\n          { ...state.progress } || {},\n          [chapter, \"steps\", step, \"done\"],\n          value\n        );\n\n        return {\n          ...state,\n          progress: {\n            ...newPorgress,\n          },\n        };\n      })();\n    case Action.SET_CURRENT_CHAPTER_PROGRESS:\n      return (() => {\n        const { chapter, value } = action.payload;\n        const newPorgress = set(\n          { ...state.progress } || {},\n          [chapter, \"done\"],\n          value\n        );\n\n        return {\n          ...state,\n          progress: {\n            ...newPorgress,\n          },\n        };\n      })();\n\n    case Action.SET_PROGRESS:\n      return (() => {\n        const { progress } = action.payload;\n\n        return {\n          ...state,\n          progress: {\n            ...state.progress,\n            ...progress,\n          },\n        };\n      })();\n\n    case Action.SET_EDITOR_CONTENT:\n      return (() => {\n        const { chapter, step, value } = action.payload;\n        const newPorgress = set(\n          { ...state.progress } || {},\n          [chapter, \"steps\", step, \"editor\", \"content\"],\n          value\n        );\n\n        return {\n          ...state,\n          current: {\n            ...state.current,\n            editor: {\n              ...state.current.editor,\n              content: value,\n            },\n          },\n          progress: {\n            ...newPorgress,\n          },\n        };\n      })();\n\n    case Action.SET_EDITOR_SELECTION:\n      return (() => {\n        const { value } = action.payload;\n\n        return {\n          ...state,\n\n          current: {\n            ...state.current,\n            editor: {\n              ...state.current.editor,\n              selection: value,\n            },\n          },\n        };\n      })();\n\n    case Action.SET_EDITOR_FOCUS:\n      return (() => {\n        const { value } = action.payload;\n\n        return {\n          ...state,\n          current: {\n            ...state.current,\n            editor: {\n              ...state.current.editor,\n              focus: value,\n            },\n          },\n        };\n      })();\n\n    // default:\n    //   throw new Error(`Unhandled action type: ${action && action.type}`);\n  }\n};\n\nconst Context = createContext<{\n  state: State;\n  dispatch: Dispatch<Actions>;\n}>({\n  state: initialState,\n  dispatch: () => null,\n});\n\nconst Provider: React.FC = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  // Local Storage: setting & getting data\n  useEffect(() => {\n    if (localStorage) {\n      const progress = localStorage.getItem(\"session.progress\");\n\n      if (progress) {\n        dispatch({\n          type: Action.SET_PROGRESS,\n          payload: {\n            progress: JSON.parse(progress),\n          },\n        });\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    localStorage.setItem(\"session.progress\", JSON.stringify(state.progress));\n  }, [state.progress]);\n\n  return (\n    <Context.Provider value={{ state, dispatch }}>{children}</Context.Provider>\n  );\n};\n\nexport { Provider, Context, Action };\n","import React, {\n  Reducer,\n  createContext,\n  useReducer,\n  Dispatch,\n  useEffect,\n} from \"react\";\nimport { ActionMap } from \"./ActionMap\";\nimport { URL } from \"../util/api\";\n\nenum Action {\n  ADD_LANG = \"ADD_LANG\",\n  SET_CHAPTERS = \"SET_CHAPTERS\",\n}\n\ntype ActionPayload = {\n  [Action.ADD_LANG]: {\n    lang: {\n      [key: string]: string;\n    };\n  };\n  [Action.SET_CHAPTERS]: {\n    chapters: Chapter[];\n  };\n};\n\nexport type Actions = ActionMap<ActionPayload>[keyof ActionMap<ActionPayload>];\n\nexport type Chapter = {\n  id: string;\n  title: string;\n};\n\nexport type Step = {\n  id: string;\n  title: string;\n  task: Task;\n};\n\ntype Task = {\n  instruction: string;\n  match?: string;\n  check?: string;\n  solution?: string;\n};\n\ntype State = {\n  chapters: Chapter[];\n  lang: {\n    [key: string]: string;\n  };\n};\n\nconst initialState: State = {\n  chapters: [],\n  lang: {},\n};\n\nconst reducer: Reducer<State, Actions> = (state, action) => {\n  switch (action.type) {\n    case Action.ADD_LANG:\n      return (() => {\n        const { lang } = action.payload;\n\n        return {\n          ...state,\n          lang: {\n            ...state.lang,\n            ...lang,\n          },\n        };\n      })();\n    case Action.SET_CHAPTERS:\n      return (() => {\n        const { chapters } = action.payload;\n\n        return {\n          ...state,\n          chapters,\n        };\n      })();\n\n    // default:\n    //   throw new Error(`Unhandled action type: ${action && action.type}`);\n  }\n};\n\nconst Context = createContext<{\n  state: State;\n  dispatch: Dispatch<Actions>;\n}>({\n  state: initialState,\n  dispatch: () => null,\n});\n\nconst Provider: React.FC = ({ children }) => {\n  const [state, dispatch] = useReducer(reducer, initialState);\n\n  useEffect(() => {\n    // setLoading(true);\n\n    fetch(URL.course)\n      .then((response) => {\n        if (response.ok) {\n          return response.json();\n        } else {\n          throw new Error(response.statusText);\n        }\n      })\n      .then((data: State) => {\n        if (data) {\n          dispatch({\n            type: Action.SET_CHAPTERS,\n            payload: {\n              chapters: data.chapters,\n            },\n          });\n          dispatch({\n            type: Action.ADD_LANG,\n            payload: {\n              lang: data.lang,\n            },\n          });\n        }\n      });\n  }, [URL.course]);\n\n  return (\n    <Context.Provider value={{ state, dispatch }}>{children}</Context.Provider>\n  );\n};\n\nexport { Provider, Context, Action };\n","import pkg from \"../../package.json\";\n\nconst base = process.env.REACT_APP_DEV\n  ? `${pkg.homepage}`\n  : `${process.env.PUBLIC_URL}`;\n\nexport const URL = {\n  course: `${base}/api/course/js/basic/course.json`,\n  chapter: ({ chapter }) =>\n    `${base}/api/course/js/basic/chapter/${chapter}.json`,\n  step: ({ chapter, step }) =>\n    `${base}/api/course/js/basic/chapter/${chapter}/${step}.json`,\n  movie: ({ chapter, step }) =>\n    process.env.REACT_APP_DEV\n      ? `/movies/convert/course/js/basic/chapter/${chapter}/${step}/playlist.m3u8`\n      : `https://www.escep.ch/videos/convert/course/js/basic/chapter/${chapter}/${step}/playlist.m3u8`,\n};\n\nexport const ROUTE = {\n  chapterFirstStep: ({ chapter }) => `/course/js/basic/${chapter}/overview`,\n  step: ({ chapter, step }) => `/course/js/basic/${chapter}/${step}`,\n};\n","/*\n\ncheck \nhttps://github.com/daenub/IAD2019.news/blob/master/components/header/index.js\n\n*/\n\nimport React, { useContext } from \"react\";\nimport \"./styles.css\";\nimport { Context as SessionContext } from \"../../context/session\";\n\nimport { Context as CourseContext } from \"../../context/course\";\n\nimport { Chapter } from \"../../context/course\";\nimport StatusIcon from \"../StatusIcon\";\nimport { useParams } from \"react-router-dom\";\nimport { RouterParams } from \"../../index\";\nimport { Link } from \"react-router-dom\";\n\ntype CapterMenuItemProps = {\n  children: React.ReactNode;\n  done: boolean;\n  active: boolean;\n};\n\nfunction CapterMenuItem({ children, done, active }: CapterMenuItemProps) {\n  return (\n    <div\n      className={`capter-menu__item ${\n        active ? \"capter-menu__item--active\" : \"capter-menu__item--inactive\"\n      } ${\n        done && !active ? \"capter-menu__item--done\" : \"capter-menu__item--open\"\n      }`}\n    >\n      {children}\n    </div>\n  );\n}\n\nfunction CapterMenu() {\n  const { state } = useContext(SessionContext);\n  const { state: appState } = useContext(CourseContext);\n  let { chapter } = useParams<RouterParams>();\n\n  return (\n    <div className=\"capter-menu\">\n      {\n        <div className=\"capter-menu__list\">\n          {appState.chapters &&\n            appState.chapters.map((item: Chapter) => (\n              <CapterMenuItem\n                key={item.id}\n                done={\n                  (state.progress && state.progress[chapter]?.done) || false\n                }\n                active={chapter === item.id}\n              >\n                <Link to={`/course/js/basic/${item.id}/overview`}>\n                  {state.progress && state.progress[item.id]?.done && (\n                    <StatusIcon />\n                  )}\n                  {item.title}\n                </Link>\n              </CapterMenuItem>\n            ))}\n        </div>\n      }\n    </div>\n  );\n}\n\nexport default CapterMenu;\n","import React, { useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport \"./styles.css\";\nimport { RouterParams } from \"../../index\";\nimport { Context as SessionContext } from \"../../context/session\";\nimport { Step } from \"../../context/course\";\n\nimport { ROUTE } from \"../../util/api\";\nimport StatusIcon from \"../StatusIcon\";\nimport { Link } from \"react-router-dom\";\n\ntype StepMenuProps = {\n  steps: Step[];\n};\n\ntype StepMenuItemProps = {\n  children: React.ReactNode;\n  done: boolean;\n  active: boolean;\n};\n\nfunction StepMenuItem({ children, done, active }: StepMenuItemProps) {\n  return (\n    <div\n      className={`step-menu__item ${\n        active ? \"step-menu__item--active\" : \"step-menu__item--inactive\"\n      } ${done && !active ? \"step-menu__item--done\" : \"step-menu__item--open\"}`}\n    >\n      {children}\n    </div>\n  );\n}\n\nfunction StepMenu({ steps }: StepMenuProps) {\n  const { state } = useContext(SessionContext);\n  let { step, chapter } = useParams<RouterParams>();\n\n  // const chapter = state.chapters.find(\n  //   (item) => item.id === state.current.chapter\n  // );\n\n  return (\n    <div className=\"step-menu\">\n      <div className=\"step-menu__list\">\n        {steps.map((item) => (\n          <StepMenuItem\n            key={item.id}\n            done={\n              (state.progress &&\n                state.progress[chapter]?.steps[item.id] &&\n                state.progress[chapter]?.steps[item.id].done) ||\n              false\n            }\n            active={step === item.id}\n          >\n            <Link\n              className=\"step-menu__link\"\n              to={ROUTE.step({ chapter, step: item.id })}\n            >\n              {state.progress &&\n                state.progress[chapter]?.steps[item.id] &&\n                state.progress[chapter]?.steps[item.id].done && <StatusIcon />}\n              {item.title}\n            </Link>\n          </StepMenuItem>\n        ))}\n      </div>\n    </div>\n  );\n}\n\nexport default StepMenu;\n","import { Range } from \"react-range\";\nimport \"./styles.css\";\n\ntype TrackProps = {\n  max: number;\n  value: number;\n  // max?: number;\n  // formatFn?: Function;\n  onChange: Function;\n};\n\nconst Track = ({ max, value, onChange }: TrackProps) => {\n  // const [value, setValue] = useState(0);\n\n  return (\n    <div className=\"track\">\n      <Range\n        step={0.1}\n        min={0.0}\n        max={Math.round(max * 10) / 10}\n        values={[value]}\n        onChange={(values) => onChange(values[0])}\n        renderTrack={({ props, children }) => (\n          <div {...props} className=\"track__range\">\n            <div\n              className=\"track__played\"\n              style={{\n                width: `${(100 / max) * value}%`,\n              }}\n            />\n            {children}\n          </div>\n        )}\n        renderThumb={({ props }) => <div {...props} className=\"track__thumb\" />}\n      />\n    </div>\n  );\n};\n\nexport default Track;\n","import React, { useEffect, useRef, useState } from \"react\";\nimport videojs, { VideoJsPlayer } from \"video.js\";\nimport \"video.js/dist/video-js.css\";\n// import LineControl from \"../LineControl\";\nimport Track from \"../Track\";\nimport \"./styles.css\";\nimport { useVideojs } from \"./useVideojs\";\n\ntype VideoPlayerProps = {\n  onTimeUpdate: Function;\n  src: string;\n};\n\nfunction VideoPlayer({ onTimeUpdate: update, src }: VideoPlayerProps) {\n  const [isPlaying, setPlaying] = useState(false);\n  const [isMuted, setMute] = useState(false);\n  const [duration, setDuration] = useState(0);\n  const [durationFormat, setDurationFormat] = useState(\"\");\n  const [playPosition, setPlayPosition] = useState(0);\n  const [isInitial, setInitial] = useState(true);\n\n  let player = useRef<VideoJsPlayer | null>(null);\n\n  const updatePosition = (pos: number | undefined) => {\n    update(pos || 0);\n    setPlayPosition(pos || 0);\n    // dispatch({\n    //   type: SessionAction.SET_PLAYER_POSITION,\n    //   payload: {\n    //     value: pos || 0,\n    //   },\n    // });\n  };\n\n  useEffect(() => {\n    updatePosition(0);\n    setDuration(0);\n    setMute(false);\n    setPlaying(false);\n    setInitial(true);\n  }, [src]);\n\n  const onPlay = (currentTime?: number) => {\n    updatePosition(currentTime);\n  };\n\n  const onPause = (currentTime?: number) => {\n    updatePosition(currentTime);\n  };\n\n  const onEnd = (currentTime?: number) => {\n    setPlaying(false);\n    updatePosition(currentTime);\n  };\n\n  const onTimeUpdate = (currentTime: number) => {\n    setPlayPosition(currentTime);\n    updatePosition(currentTime);\n  };\n  const onLoadedmetadata = (totalTime: number) => {\n    // updatePosition(currentTime);\n    setDuration(totalTime);\n  };\n\n  const onReady = (p: VideoJsPlayer) => {\n    player.current = p;\n  };\n\n  const { videoNodeRef } = useVideojs({\n    src,\n    controls: false,\n    autoplay: false,\n    responsive: false,\n    bigPlayButtonCentered: false,\n    width: 200,\n    height: 200,\n    html5: {\n      hls: {\n        overrideNative: true,\n      },\n      nativeAudioTracks: false,\n      nativeVideoTracks: false,\n    },\n    onPlay,\n    onPause,\n    onEnd,\n    onReady,\n    onTimeUpdate,\n    onLoadedmetadata,\n  });\n\n  const togglePlayback = () => {\n    // this.player.muted(this.mute);\n\n    if (player.current) {\n      setPlaying(!isPlaying);\n\n      if (!isPlaying) {\n        player.current.play();\n      } else {\n        player.current.pause();\n      }\n    }\n  };\n\n  const startPlayback = () => {\n    if (player.current) {\n      setInitial(false);\n      togglePlayback();\n    }\n  };\n\n  const toggleMute = () => {\n    // this.player.muted(this.mute);\n\n    if (player.current) {\n      setMute(!isMuted);\n\n      if (!isMuted) {\n        player.current.muted(true);\n      } else {\n        player.current.muted(false);\n      }\n    }\n  };\n\n  const setPosition = (timestamp: number) => {\n    // this.player.muted(this.mute);\n\n    if (player.current) {\n      player.current.currentTime(timestamp);\n    }\n  };\n\n  const playPositionFormat = videojs.formatTime(\n    Math.min(playPosition, duration),\n    600\n  );\n\n  useEffect(() => {\n    setDurationFormat(videojs.formatTime(duration, 600));\n  }, [duration]);\n\n  // wrap the player in a div with a `data-vjs-player` attribute\n  // so videojs won't create additional wrapper in the DOM\n  // see https://github.com/videojs/video.js/pull/3856\n  return (\n    <>\n      <div className=\"video-player\">\n        <div className=\"video-player__video\">\n          <div data-vjs-player>\n            <video ref={videoNodeRef}></video>\n          </div>\n        </div>\n        <div className=\"video-player__bar\">\n          <div className=\"video-player__track\">\n            {!!duration && (\n              <Track\n                max={duration}\n                value={playPosition}\n                onChange={(t: number) => setPosition(t)}\n              />\n            )}\n          </div>\n          <div className=\"video-player__control\">\n            {!!duration && (\n              <>\n                <button\n                  className={`video-player__btn ${\n                    isPlaying ? \"icon-pause\" : \"icon-play\"\n                  }`}\n                  onClick={togglePlayback}\n                ></button>\n                <button\n                  className={`video-player__btn ${\n                    isMuted ? \"icon-volume-off\" : \"icon-volume-up\"\n                  }`}\n                  onClick={toggleMute}\n                ></button>\n              </>\n            )}\n            <div className=\"video-player__time\">\n              {playPositionFormat} | {durationFormat}\n            </div>\n          </div>\n        </div>\n        {!!duration && isInitial && (\n          <div className=\"video-player__big-start\">\n            <button onClick={startPlayback}>\n              <span className=\"icon-play\"></span>\n            </button>\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n\nexport default VideoPlayer;\n","import \"./styles.css\";\nimport { styles } from \"../Editor/editor\";\n\nimport { highlight, languages } from \"prismjs/components/prism-core\";\nimport \"prismjs/components/prism-clike\";\nimport \"prismjs/components/prism-javascript\";\nimport \"prismjs/themes/prism.css\"; //Example style, you can use another\n\nimport { EditorState } from \"../../context/session\";\n\ntype TextPlayerProps = {\n  editor: EditorState | undefined;\n};\n\nenum PartType {\n  TEXT = \"TEXT\",\n  MARK = \"MARK\",\n  TEXT_SELECTED = \"TEXT_SELECTED\",\n}\n\ntype Part = {\n  type: PartType;\n  value: string;\n};\n\ntype Line = Part[];\n\nconst showPart = (part: Part) => {\n  switch (part.type) {\n    case PartType.TEXT:\n      return <span className=\"part part--text\">{part.value}</span>;\n    case PartType.MARK:\n      return <span className=\"part part--mark\">&#x200B;</span>;\n    case PartType.TEXT_SELECTED:\n      return <span className=\"part part--selected\">{part.value}</span>;\n    default:\n  }\n};\n\n// const splitAt = index => x => [x.slice(0, index), x.slice(index)]\n\nconst showLines = (code: string, start: number, end: number) => {\n  const hasCursor = start === end;\n  let offset = 0;\n  const lines: Line[] = code.split(\"\\n\").map((line: string) => {\n    let parts = null;\n\n    // there is just a cursor\n    if (hasCursor) {\n      // the cursor is in this line\n      if (start >= offset && end <= offset + line.length) {\n        parts = [\n          {\n            type: PartType.TEXT,\n            value: line.slice(0, start - offset),\n          },\n          {\n            type: PartType.MARK,\n            value: \"\",\n          },\n          {\n            type: PartType.TEXT,\n            value: line.slice(end - offset),\n          },\n        ];\n      }\n      // no cursor in this line\n      else {\n        parts = [\n          {\n            type: PartType.TEXT,\n            value: line,\n          },\n        ];\n      }\n    }\n    // there is a selection\n    else {\n      // selection start of line\n      if (start <= offset && end > offset) {\n        parts = [\n          {\n            type: PartType.TEXT_SELECTED,\n            value: line.slice(0, end - offset),\n          },\n          {\n            type: PartType.TEXT,\n            value: line.slice(end - offset),\n          },\n        ];\n      }\n      // selection in line\n      else if (start >= offset && start < offset + line.length) {\n        parts = [\n          {\n            type: PartType.TEXT,\n            value: line.slice(0, start - offset),\n          },\n          {\n            type: PartType.TEXT_SELECTED,\n            value: line.slice(start - offset, end - offset),\n          },\n          {\n            type: PartType.TEXT,\n            value: line.slice(end - offset, line.length),\n          },\n        ];\n      }\n      // selection in other line\n      else {\n        parts = [\n          {\n            type: PartType.TEXT,\n            value: line,\n          },\n        ];\n      }\n    }\n\n    offset += line.length + 1;\n    return parts;\n  });\n\n  return lines.map((line: Line, lineIndex: number) => (\n    <div className=\"text-player__line\" key={`line_${lineIndex}`}>\n      <code>\n        {line.map((part, partIndex: number) => (\n          <span key={`line_${lineIndex}_part_${partIndex}`}>\n            {showPart(part)}\n          </span>\n        ))}\n      </code>\n    </div>\n  ));\n};\n\nfunction TextPlayer({ editor }: TextPlayerProps) {\n  return (\n    <div className=\"text-player code\">\n      <pre\n        className=\"text-player__highlight\"\n        style={{ ...styles.editor, ...styles.highlight }}\n        {...{\n          dangerouslySetInnerHTML: {\n            __html: highlight(editor.content, languages.js) + \"<br />\",\n          },\n        }}\n      />\n      <pre\n        className=\"text-player__selection\"\n        style={{ ...styles.editor, ...styles.highlight }}\n        aria-hidden=\"true\"\n      >\n        {editor &&\n          showLines(\n            editor.content,\n            editor.selection.start,\n            editor.selection.end\n          )}\n      </pre>\n    </div>\n  );\n}\n\nexport default TextPlayer;\n","// https://github.com/Hector101/react-videojs-hook/blob/master/src/useVideojs.ts\nimport { useRef, useEffect } from \"react\";\nimport videojs, { VideoJsPlayer } from \"video.js\";\n\nimport usePrevious from \"../../util/usePrevious\";\n\ntype VideoJsPlayerPluginOptions = {\n  [pluginName: string]: any;\n};\n\ntype Props = {\n  src: string;\n  sources?: videojs.Tech.SourceObject[];\n  aspectRatio?: string;\n  autoplay?: boolean | string;\n  controlBar?: videojs.ControlBarOptions | false;\n  textTrackSettings?: videojs.TextTrackSettingsOptions;\n  controls?: boolean;\n  defaultVolume?: number;\n  fluid?: boolean;\n  responsive?: boolean;\n  width?: number;\n  height?: number;\n  html5?: any;\n  inactivityTimeout?: number;\n  language?: string;\n  languages?: { [code: string]: videojs.LanguageTranslations };\n  liveui?: boolean;\n  loop?: boolean;\n  muted?: boolean;\n  nativeControlsForTouch?: boolean;\n  notSupportedMessage?: string;\n  playbackRates?: number[];\n  plugins?: Partial<VideoJsPlayerPluginOptions>;\n  poster?: string;\n  preload?: string;\n  sourceOrder?: boolean;\n  techOrder?: string[];\n  tracks?: videojs.TextTrackOptions[];\n  hideControls?: string[];\n  bigPlayButton?: boolean;\n  bigPlayButtonCentered?: boolean;\n  onReady?: (player: VideoJsPlayer) => void;\n  onPlay?: (currentTime?: number) => void;\n  onPause?: (currentTime?: number) => void;\n  onTimeUpdate?: (currentTime: number) => void;\n  onSeeking?: (currentTime: number) => void;\n  onLoadedmetadata?: (totalTime: number) => void;\n  onSeeked?: (position: number, currentTime: number) => void;\n  onEnd?: (currentTime?: number) => void;\n};\n\nexport function useVideojs({\n  src,\n  autoplay,\n  onReady,\n  onPlay,\n  onPause,\n  onTimeUpdate,\n  onSeeking,\n  onLoadedmetadata,\n  onSeeked,\n  onEnd,\n  ...props\n}: Props) {\n  const videoNodeRef = useRef(null);\n\n  let player: VideoJsPlayer;\n\n  const previousSrc = usePrevious(src);\n  const previousAutoplay = usePrevious(autoplay);\n\n  useEffect(() => {\n    if (previousSrc !== src && !previousSrc) {\n      _initPlayer();\n      _initPlayerEvents();\n    }\n    if (previousSrc !== src && previousSrc) {\n      _changeSrc();\n      _unregisterEvents();\n      _initPlayerEvents();\n    }\n\n    if (previousAutoplay !== autoplay && previousAutoplay !== undefined) {\n      _changeAutoplay();\n      _unregisterEvents();\n      _initPlayerEvents();\n    }\n  }, [src, autoplay]);\n\n  const _initPlayer = () => {\n    player = videojs(videoNodeRef.current, props);\n    player.src(src);\n    player.autoplay(autoplay || false);\n  };\n\n  const _changeSrc = () => {\n    player = videojs(videoNodeRef.current);\n    player.src(src);\n  };\n\n  const _changeAutoplay = () => {\n    player = videojs(videoNodeRef.current);\n    player.autoplay(autoplay || false);\n  };\n\n  const _initPlayerEvents = () => {\n    let currentTime = 0;\n    let previousTime = 0;\n    let position = 0;\n\n    player.ready(() => {\n      if (onReady) {\n        onReady(player);\n      }\n    });\n\n    player.on(\"play\", () => {\n      if (onPlay) {\n        onPlay(player.currentTime());\n      }\n    });\n\n    player.on(\"pause\", () => {\n      if (onPause) {\n        onPause(player.currentTime());\n      }\n    });\n\n    player.on(\"timeupdate\", () => {\n      if (onTimeUpdate) {\n        onTimeUpdate(player.currentTime());\n        previousTime = currentTime;\n        currentTime = player.currentTime();\n        if (previousTime < currentTime) {\n          position = previousTime;\n          previousTime = currentTime;\n        }\n      }\n    });\n\n    player.on(\"seeking\", () => {\n      if (onSeeking) {\n        player.off(\"timeupdate\");\n        player.one(\"seeked\");\n        onSeeking(player.currentTime());\n      }\n    });\n\n    player.on(\"loadedmetadata\", () => {\n      if (onLoadedmetadata) {\n        onLoadedmetadata(player.duration());\n      }\n    });\n\n    player.on(\"seeked\", () => {\n      if (onSeeked) {\n        const completeTime = Math.floor(player.currentTime());\n        onSeeked(position, completeTime);\n      }\n    });\n\n    player.on(\"ended\", () => {\n      if (onEnd) {\n        onEnd(player.currentTime());\n      }\n    });\n  };\n\n  const _unregisterEvents = () => {\n    player.off(\"play\");\n    player.off(\"pause\");\n    player.off(\"timeupdate\");\n    player.off(\"seeking\");\n    player.off(\"seeked\");\n    player.off(\"ended\");\n  };\n\n  return { videoNodeRef };\n}\n","import React, { useContext, useState } from \"react\";\nimport \"./styles.css\";\nimport VideoPlayer from \"../VideoPlayer\";\nimport Preview from \"../Preview\";\nimport TextPlayer from \"../TextPlayer\";\nimport useFetch from \"../../util/useFetch\";\nimport { useParams } from \"react-router-dom\";\nimport { RouterParams } from \"../../index\";\nimport { URL } from \"../../util/api\";\n\nimport { EditorFrame } from \"../../context/session\";\nimport { Context as CourseContext } from \"../../context/course\";\n\n/**\n * Returns the index of the last element in the array where predicate is true, and -1\n * otherwise.\n * @param array The source array to search in\n * @param predicate find calls predicate once for each element of the array, in descending\n * order, until it finds one where predicate returns true. If such an element is found,\n * findLastIndex immediately returns that element index. Otherwise, findLastIndex returns -1.\n */\nexport function findLastIndex<T>(\n  array: Array<T>,\n  predicate: (value: T, index: number, obj: T[]) => boolean\n): number {\n  let l = array.length;\n  while (l--) {\n    if (predicate(array[l], l, array)) return l;\n  }\n  return -1;\n}\n\nfunction Player() {\n  const {\n    state: { lang },\n  } = useContext(CourseContext);\n  let { chapter, step } = useParams<RouterParams>();\n\n  const [pos, setPos] = useState(0);\n\n  // const pos = state.current.playPosition;\n\n  const { response: editorFrames, hasError } = useFetch<EditorFrame[]>(\n    URL.step({ chapter, step })\n  );\n\n  const editorFramePosPos = editorFrames\n    ? findLastIndex(editorFrames, (item) => item.time <= pos * 1000)\n    : 0;\n\n  const editorFramePos = editorFrames ? editorFrames[editorFramePosPos] : false;\n\n  return (\n    <div className=\"player\">\n      <div className=\"player__content\">\n        <div className=\"player__video\">\n          <VideoPlayer\n            onTimeUpdate={(t: number) => setPos(t)}\n            src={URL.movie({ chapter, step })}\n          />\n        </div>\n        <div className=\"player__code\">\n          {(!hasError && editorFramePos && (\n            <TextPlayer editor={editorFramePos.editor} />\n          )) || <span>{lang[\"video.error\"]}</span>}\n        </div>\n        <div className=\"player__preview\">\n          {!hasError && editorFramePos && (\n            <Preview code={editorFramePos.editor.content} hideErrors={true} />\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Player;\n","import \"prismjs/components/prism-clike\";\nimport { highlight, languages } from \"prismjs/components/prism-core\";\nimport \"prismjs/components/prism-javascript\";\nimport \"prismjs/themes/prism.css\"; //Example style, you can use another\nimport React, { useContext, useEffect, useRef } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport {\n  Action as SessionAction,\n  Context as SessionContext,\n  Selection,\n} from \"../../context/session\";\nimport { RouterParams } from \"../../index\";\nimport SimpleEditor, { styles } from \"./editor\";\nimport \"./styles.css\";\n\nexport type editorProps = {\n  content: string;\n  solution?: string;\n};\n\nconst Editor = ({ content, solution }: editorProps) => {\n  const { dispatch } = useContext(SessionContext);\n  let { chapter, step } = useParams<RouterParams>();\n\n  const inputEl = useRef<HTMLTextAreaElement>(null);\n\n  useEffect(() => {\n    inputEl?.current?.focus();\n  }, []);\n\n  const pushValue = (value: string) => {\n    dispatch({\n      type: SessionAction.SET_EDITOR_CONTENT,\n      payload: {\n        chapter,\n        step,\n        value,\n      },\n    });\n  };\n\n  const pushSelection = (value: Selection) => {\n    dispatch({\n      type: SessionAction.SET_EDITOR_SELECTION,\n      payload: {\n        value,\n      },\n    });\n  };\n\n  // const handleInputChange = (e: React.ChangeEvent<HTMLTextAreaElement>) => {\n  //   pushValue(e.target.value);\n  // };\n  const handleInputChange = (val: string) => {\n    pushValue(val);\n  };\n\n  const handleSelection = (\n    e:\n      | React.MouseEvent<HTMLTextAreaElement>\n      | React.KeyboardEvent<HTMLTextAreaElement>\n  ) => {\n    const start = e.target.selectionStart || 0;\n    const end = e.target.selectionEnd || start;\n\n    pushSelection({ start, end });\n  };\n\n  // const handleSelection = (start: number, end: number) => {\n  //   console.log(\"handleSelection\", start, end);\n  //   pushSelection({ start, end });\n\n  //   // other code within selection handler as per original\n\n  //   // inputEl?.current?.focus();\n  //   // // the line below doesn't work!\n  //   // // inputEl?.current?.setSelectionRange(start + e.native.length, end + e.native.length)\n\n  //   // //this one does, but is not good practice..\n  //   // setTimeout(\n  //   //   () =>\n  //   //     inputEl?.current?.setSelectionRange(\n  //   //       start + e.native.length,\n  //   //       end + e.native.length\n  //   //     ),\n  //   //   10\n  //   // );\n  //   // setSelection({\n  //   //   start: start,\n  //   //   end: end,\n  //   // });\n  // };\n\n  // const handleKeyDown = (e: React.KeyboardEvent) => {\n  //   if (e.key == \"Tab\") {\n  //     e.preventDefault();\n  //     const el = inputEl?.current;\n  //     const start = el?.selectionStart || 0;\n  //     const end = el?.selectionEnd || start;\n\n  //     // set textarea value to: text before caret + tab + text after caret\n  //     const value =\n  //       el?.value.substring(0, start) + \"\\t\" + el?.value.substring(end);\n\n  //     pushValue(value);\n\n  //     // dispatch({\n  //     //   type: SessionAction.SET_EDITOR_CONTENT,\n  //     //   payload: {\n  //     //     value: value,\n  //     //   },\n  //     // });\n\n  //     // put caret at right position again\n  //     setSelection({ start: start + 1, end: end + 1 });\n  //   }\n  // };\n\n  const setFocus = () => {\n    dispatch({\n      type: SessionAction.SET_EDITOR_FOCUS,\n      payload: {\n        value: true,\n      },\n    });\n  };\n\n  const setBlur = () => {\n    dispatch({\n      type: SessionAction.SET_EDITOR_FOCUS,\n      payload: {\n        value: false,\n      },\n    });\n  };\n\n  return (\n    <div className=\"editor\">\n      <SimpleEditor\n        className=\"editor__editor code\"\n        preClassName=\"editor__textarea-pre\"\n        textareaClassName=\"editor__textarea-textarea\"\n        onFocus={setFocus}\n        onBlur={setBlur}\n        onSelect={handleSelection}\n        onValueChange={handleInputChange}\n        value={content}\n        highlight={(code) => highlight(code, languages.js)}\n        style={\n          {\n            // fontFamily: '\"Fira code\", \"Fira Mono\", monospace',\n            // fontSize: 12,\n          }\n        }\n      />\n\n      {solution && (\n        <div className=\"editor__solution\">\n          <div className=\"editor__solution-show\">Lösung anschauen</div>\n          <div className=\"editor__solution-text editor__editor code\">\n            <pre\n              className=\"editor__textarea-pre\"\n              aria-hidden=\"true\"\n              style={{ ...styles.editor, ...styles.highlight }}\n            >\n              <div\n                dangerouslySetInnerHTML={{\n                  __html: highlight(solution, languages.js),\n                }}\n              />\n            </pre>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Editor;\n","import React, { ReactNode } from \"react\";\nimport \"./styles.css\";\n\ntype ContentProps = {\n  children: ReactNode;\n  className?: string;\n};\n\nfunction Content({ children, className = \"\" }: ContentProps) {\n  return <div className={`content ${className}`}>{children}</div>;\n}\n\nexport default Content;\n","import React, { useContext, useEffect } from \"react\";\nimport WorkSpace from \"../WorkSpace\";\nimport Callout from \"../Callout\";\nimport StatusIcon from \"../StatusIcon\";\nimport Markdown from \"../Markdown\";\nimport useFetch from \"../../util/useFetch\";\nimport { RouterParams } from \"../../index\";\nimport { useParams } from \"react-router-dom\";\n\nimport \"./styles.css\";\nimport {\n  Context as SessionContext,\n  Action as SessionAction,\n} from \"../../context/session\";\nimport { Context as CourseContext } from \"../../context/course\";\n\nimport { Step, Chapter } from \"../../context/course\";\nimport { URL, ROUTE } from \"../../util/api\";\n\nimport CapterMenu from \"../CapterMenu\";\nimport StepMenu from \"../StepMenu\";\nimport Player from \"../Player\";\nimport Editor from \"../Editor\";\nimport Content from \"../Content\";\n\nexport function findNextIndex<T>(\n  array: Array<T>,\n  predicate: (value: T, index: number, obj: T[]) => boolean\n): number {\n  let l = array.length;\n\n  const index = array.findIndex(predicate);\n\n  if (index >= 0 && index < l - 1) {\n    return index + 1;\n  }\n\n  return -1;\n}\n\nfunction Viewer() {\n  const {\n    state: appState,\n    state: { lang },\n  } = useContext(CourseContext);\n  const { state, dispatch } = useContext(SessionContext);\n  let { chapter, step } = useParams<RouterParams>();\n\n  const chapterURL = URL.chapter({ chapter });\n  const { response: steps, loading, hasError } = useFetch<Step[]>(chapterURL);\n\n  const currentStepData = steps?.find((item) => item.id === step);\n\n  const currentStepProgress =\n    state.progress && state.progress[chapter]?.steps[step];\n\n  const isSolved = currentStepProgress?.done;\n\n  const content =\n    (state.progress && state.progress[chapter]?.steps[step]?.editor?.content) ||\n    \"\";\n\n  // find next step\n  let next = \"\";\n  const nextStepIndex =\n    (steps && findNextIndex<Step>(steps, (item) => item.id === step)) || 0;\n  if (steps && nextStepIndex > 0) {\n    next = ROUTE.step({ chapter, step: steps[nextStepIndex].id });\n  } else if (steps && chapter) {\n    const nextChapterIndex =\n      (appState.chapters &&\n        findNextIndex<Chapter>(\n          appState.chapters,\n          (item) => item.id === chapter\n        )) ||\n      0;\n\n    if (appState.chapters && nextChapterIndex > 0) {\n      next = ROUTE.chapterFirstStep({\n        chapter: appState.chapters[nextChapterIndex].id,\n      });\n    }\n  }\n\n  const solved = (finished: boolean) => {\n    if (isSolved !== finished) {\n      dispatch({\n        type: SessionAction.SET_CURRENT_STEP_PROGRESS,\n        payload: {\n          chapter,\n          step,\n          value: finished,\n        },\n      });\n\n      const completeSteps = steps?.filter((item) => {\n        if (item.id === step) {\n          return finished;\n        }\n        return (\n          state.progress &&\n          state.progress[chapter]?.steps[item.id] &&\n          state.progress[chapter]?.steps[item.id].done\n        );\n      });\n\n      const isChapterComplete = completeSteps?.length === steps?.length;\n\n      dispatch({\n        type: SessionAction.SET_CURRENT_CHAPTER_PROGRESS,\n        payload: {\n          chapter,\n          value: isChapterComplete,\n        },\n      });\n    }\n  };\n\n  // useEffect(() => {\n  //   const match = currentStepData?.task.match;\n  //   if (match && content) {\n  //     const regexParts = match.match(new RegExp(\"^/(.*?)/([gimy]*)$\"));\n  //     if (regexParts?.length === 3) {\n  //       const regex = new RegExp(regexParts[1], regexParts[2]);\n\n  //       const finished = regex.test(content);\n\n  //       solved(finished);\n  //     }\n  //   }\n  // }, [content]);\n\n  return (\n    <div className=\"viewer\">\n      <div className=\"viewer__chapter-menu\">\n        <CapterMenu />\n      </div>\n      <div className=\"viewer__content\">\n        <div className=\"viewer__step-menu\">\n          <div className=\"viewer__step-menu-inner\">\n            {steps && <StepMenu steps={steps} />}\n            {loading && <span> {lang[\"step.loading\"]}</span>}\n            {hasError && <span> {lang[\"step.error\"]}</span>}\n          </div>\n        </div>\n        <div className=\"viewer__step\">\n          <div className=\"viewer__teach\">\n            <Content className=\"viewer__teach-inner\">\n              <Player />\n            </Content>\n          </div>\n          <div className=\"viewer__task\">\n            <Content>\n              <Callout done={isSolved || false} next={next}>\n                <div className=\"viewer__task-text\">\n                  <h2>\n                    {isSolved && <StatusIcon />}\n                    {lang[\"step.task\"]}\n                  </h2>\n                  <p>\n                    {currentStepData && (\n                      <Markdown text={currentStepData.task.instruction} />\n                    )}\n                  </p>\n                </div>\n              </Callout>\n            </Content>\n          </div>\n          <div className=\"viewer__learn\">\n            <Content>\n              {!loading && (\n                <WorkSpace\n                  preview={currentStepProgress?.editor?.content || \"\"}\n                  check={currentStepData?.task.check}\n                  solved={solved}\n                  focus={state.current.editor.focus}\n                >\n                  <Editor\n                    content={content}\n                    solution={currentStepData.task.solution}\n                  />\n                </WorkSpace>\n              )}\n            </Content>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default Viewer;\n","import React, { useContext } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Context as SessionContext } from \"../../context/session\";\nimport { RouterParams } from \"../../index\";\nimport \"./styles.css\";\n\nfunction StepMenu() {\n  const { state } = useContext(SessionContext);\n  let { chapter, step } = useParams<RouterParams>();\n\n  const print = {\n    chapter: chapter,\n    step: step,\n    // progress: state.progress?.functions,\n    // progress_1: get(state.progress),\n    selection: `${state.current.editor.selection.start} – ${state.current.editor.selection.end}`,\n  };\n\n  return (\n    <div className=\"debug\">\n      <h3>Debug</h3>\n      <pre className=\"code\">\n        <code>{JSON.stringify(print, null, 2)}</code>\n      </pre>\n    </div>\n  );\n}\n\nexport default StepMenu;\n","import React from \"react\";\nimport \"./styles.css\";\n\ntype ButtonProps = {\n  children: React.ReactNode;\n  onClick: React.MouseEventHandler<HTMLButtonElement>;\n};\n\nconst Button = ({ children, onClick }: ButtonProps) => (\n  <button className=\"button\" onClick={onClick}>\n    {children}\n  </button>\n);\n\nexport default Button;\n","// https://areknawo.com/js-tidbits-mediastream-api/\n\n// @ts-nocheck\n\n// function createGist(opts) {\n//   ChromeSamples.log('Posting request to GitHub API...');\n// }\n// import React from \"react\";\nimport useMediaRecorder from \"@wmik/use-media-recorder\";\nimport { saveAs } from \"file-saver\";\nimport React, { useContext, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { Context as SessionContext } from \"../../context/session\";\nimport Button from \"../Button\";\nimport \"./styles.css\";\n\nfunction Player({ srcBlob, audio }) {\n  if (!srcBlob) {\n    return null;\n  }\n\n  if (audio) {\n    return <audio src={URL.createObjectURL(srcBlob)} controls />;\n  }\n\n  const handleStore = (event: React.MouseEvent<HTMLButtonElement>) => {\n    saveAs(srcBlob, \"film.webm\");\n  };\n\n  return (\n    <div>\n      <div>\n        <video\n          src={URL.createObjectURL(srcBlob)}\n          width={520}\n          height={293}\n          controls\n        />\n        <div>\n          <Button onClick={handleStore}>download</Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction LiveStreamPreview({ stream }) {\n  let videoPreviewRef = React.useRef();\n\n  React.useEffect(() => {\n    if (videoPreviewRef.current && stream) {\n      videoPreviewRef.current.srcObject = stream;\n    }\n  }, [stream]);\n\n  if (!stream) {\n    return null;\n  }\n\n  return <video ref={videoPreviewRef} width={520} height={293} autoPlay />;\n}\n\nlet start = 0;\nlet record = [];\n\nfunction Admin() {\n  const { state } = useContext(SessionContext);\n\n  const [recording, setRecording] = useState<boolean>(false);\n  const [preview, setPreview] = useState<boolean>(false);\n  let { chapter, step } = useParams<RouterParams>();\n\n  let {\n    error,\n    status,\n    mediaBlob,\n    stopRecording,\n    getMediaStream,\n    clearMediaStream,\n    startRecording,\n    liveStream,\n  } = useMediaRecorder({\n    // recordScreen: true,\n    blobOptions: {\n      // type: \"video/webm\",\n      type: \"video/webm;codecs=h264\",\n\n      // both for audio and video tracks\n      // bitsPerSecond: 128000,\n\n      // only for audio track\n      audioBitsPerSecond: 320000,\n\n      // only for video track\n      videoBitsPerSecond: 8000000,\n    },\n    mediaStreamConstraints: {\n      audio: true,\n      // video: true,\n      video: { width: 1920, height: 1080 },\n    },\n  });\n\n  useEffect(() => {\n    const now = Date.now();\n\n    record.push({\n      time: now - start,\n\n      editor: {\n        content: state.current.editor.content,\n        selection: {\n          start: state.current.editor.selection.start,\n          end: state.current.editor.selection.end,\n        },\n      },\n    });\n  }, [\n    state.current.editor.content,\n    state.current.editor.selection.start,\n    state.current.editor.selection.end,\n  ]);\n\n  const handleStop = (event: React.MouseEvent<HTMLButtonElement>) => {\n    stopRecording();\n    setRecording(false);\n\n    fetch(\"http://localhost:3005\", {\n      method: \"post\",\n      body: JSON.stringify({\n        chapter,\n        step,\n        content: JSON.stringify(record, null, 2),\n      }),\n    })\n      .then((response) => {\n        console.log(\"done text\");\n        // return response.json();\n      })\n      .then((e) => {\n        console.log(\"error text\", e);\n        // return response.json();\n      });\n\n    record = [];\n  };\n\n  // if (status === \"stopped\") {\n  //   fetch(`http://localhost:3005/media/${chapter}/${step}`, {\n  //     method: \"post\",\n  //     body: mediaBlob,\n  //   })\n  //     .then((response) => {\n  //       console.log(\"done video\");\n  //       // return response.json();\n  //     })\n  //     .then((e) => {\n  //       console.log(\"error video\", e);\n  //       // return response.json();\n  //     });\n  // }\n\n  useEffect(() => {\n    if (status === \"stopped\") {\n      var reader = new FileReader();\n      reader.readAsDataURL(mediaBlob);\n      reader.onloadend = function () {\n        var base64dataURI = reader.result.toString();\n        let base64data = base64dataURI.substr(base64dataURI.indexOf(\",\") + 1);\n        // console.log(base64data);\n\n        fetch(`http://localhost:3005/media/${chapter}/${step}`, {\n          method: \"post\",\n          // body: mediaBlob,\n          body: base64data,\n        }).then((response) => {\n          console.log(\"done video\");\n          // return response.json();\n        });\n      };\n    }\n  }, [status]);\n\n  const handleRec = (event: React.MouseEvent<HTMLButtonElement>) => {\n    startRecording();\n    setRecording(true);\n    start = Date.now();\n    record = [];\n\n    record.push({\n      time: 0,\n\n      editor: {\n        content: state.current.editor.content,\n        selection: {\n          start: state.current.editor.selection.start,\n          end: state.current.editor.selection.end,\n        },\n      },\n    });\n  };\n\n  const handleStoreSave = (event: React.MouseEvent<HTMLButtonElement>) => {\n    const content =\n      (state.progress &&\n        state.progress[chapter]?.steps[step]?.editor?.content) ||\n      \"\";\n    fetch(\"http://localhost:3005/solution\", {\n      method: \"post\",\n      body: JSON.stringify({\n        chapter,\n        step,\n        content: content.trim(),\n      }),\n    })\n      .then((response) => {\n        console.log(\"done solution\");\n        // return response.json();\n      })\n      .then((e) => {\n        console.log(\"error solution\", e);\n        // return response.json();\n      });\n  };\n\n  const handleStartPreview = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setPreview(true);\n    getMediaStream();\n  };\n  const handleStopPreview = (event: React.MouseEvent<HTMLButtonElement>) => {\n    setPreview(false);\n    clearMediaStream();\n  };\n\n  return (\n    <div className=\"admin\">\n      <h3>Recorder</h3>\n      <p>{error ? `${status} ${error.message}` : status}</p>\n      <div className=\"admin__preview\">\n        <div className=\"admin__preview-btn\">\n          {(!preview && (\n            <button type=\"button\" onClick={handleStartPreview}>\n              Preview\n            </button>\n          )) || (\n            <button type=\"button\" onClick={handleStopPreview}>\n              Stop Preview\n            </button>\n          )}\n        </div>\n        <div className=\"admin__preview-screen\">\n          <svg\n            width=\"16\"\n            height=\"9\"\n            viewBox=\"0 0 16 9\"\n            fill=\"none\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n          >\n            <path\n              fillRule=\"evenodd\"\n              clipRule=\"evenodd\"\n              d=\"M8.5 0H0V9H8.5H16V0H8.5ZM8.5 0C10.9853 0 13 2.01472 13 4.5C13 6.98528 10.9853 9 8.5 9C6.01472 9 4 6.98528 4 4.5C4 2.01472 6.01472 0 8.5 0Z\"\n              fill=\"black\"\n              fillOpacity=\"0.7\"\n            />\n          </svg>\n\n          <LiveStreamPreview stream={liveStream} />\n        </div>\n      </div>\n      <Player srcBlob={mediaBlob} />\n\n      {(!recording && (\n        <Button onClick={(e) => handleRec(e)}>Record</Button>\n      )) || <Button onClick={(e) => handleStop(e)}>Stop</Button>}\n\n      <div>\n        <button type=\"button\" onClick={handleStoreSave}>\n          write solution\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default Admin;\n","import React from \"react\";\nimport \"./styles.css\";\n\n// const options = {\n//   year: \"numeric\",\n//   month: \"long\",\n//   day: \"numeric\",\n// };\n\n// const options = {\n\n//   year: 'numeric',\n//   month: 'numeric',\n//   day: 'numeric',\n//   hour: '2-digit',\n//   minute: '2-digit',\n// }\n\nconst version = new Intl.DateTimeFormat(\"de-DE\", {\n  year: \"numeric\",\n  month: \"numeric\",\n  day: \"numeric\",\n  hour: \"2-digit\",\n  minute: \"2-digit\",\n})\n  .format(new Date(parseInt(process.env.REACT_APP_BUILD_TIME, 10) * 1000))\n  .replace(\",\", \"\");\n\nfunction Version() {\n  return <div className=\"version\">Version {version}</div>;\n}\n\nexport default Version;\n","import React, { useContext } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Markdown from \"../Markdown\";\nimport { Context as CourseContext } from \"../../context/course\";\n\nimport \"./styles.css\";\n\nconst Home = () => {\n  const {\n    state: { lang },\n  } = useContext(CourseContext);\n\n  return (\n    <div className=\"home\">\n      <div className=\"home__inner\">\n        <h1 className=\"home__title\">{lang[\"intro.title\"]}</h1>\n        <p className=\"home__intro inline-link\">\n          <Markdown text={lang[\"intro.text\"]} />\n        </p>\n        <div className=\"home__cta\">\n          <Link className=\"home__btn\" to={lang[\"intro.link\"]}>\n            <em>{lang[\"intro.btn\"]}</em>\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Home;\n","import { ReportHandler } from \"web-vitals\";\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import(\"web-vitals\").then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport \"./fontello/css/fontello.css\";\nimport Viewer from \"./Components/Viewer\";\nimport Debug from \"./Components/Debug\";\nimport Admin from \"./Components/Admin\";\nimport Version from \"./Components/Version\";\nimport Home from \"./Components/Home\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { HashRouter as Router, Switch, Route } from \"react-router-dom\";\n\n// setup Provider\n\nimport { Provider as SessionProvider } from \"./context/session\";\nimport { Provider as CourseProvider } from \"./context/course\";\n\nexport interface RouterParams {\n  chapter: string;\n  step: string;\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <CourseProvider>\n      <SessionProvider>\n        <Router>\n          <div className=\"container\">\n            <Switch>\n              <Route exact path=\"/\">\n                <Home />\n              </Route>\n              <Route path=\"/course/js/basic/:chapter/:step\">\n                <Viewer />\n\n                {process.env.REACT_APP_DEV && (\n                  <>\n                    <Debug />\n                    <Admin />\n                  </>\n                )}\n              </Route>\n            </Switch>\n\n            <Version />\n          </div>\n        </Router>\n      </SessionProvider>\n    </CourseProvider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","/* @flow */\n/* global global */\n\nimport * as React from \"react\";\n\ntype Props = React.ElementConfig<\"div\"> & {\n  // Props for the component\n  value: string,\n  onValueChange: (value: string) => mixed,\n  onSelect: (e: object) => mixed,\n  highlight: (value: string) => string | React.Node,\n  tabSize: number,\n  insertSpaces: boolean,\n  ignoreTabKey: boolean,\n  padding: number | string,\n  style?: {},\n\n  // Props for the textarea\n  textareaId?: string,\n  textareaClassName?: string,\n  autoFocus?: boolean,\n  disabled?: boolean,\n  form?: string,\n  maxLength?: number,\n  minLength?: number,\n  name?: string,\n  placeholder?: string,\n  readOnly?: boolean,\n  required?: boolean,\n  onClick?: (e: MouseEvent) => mixed,\n  onFocus?: (e: FocusEvent) => mixed,\n  onBlur?: (e: FocusEvent) => mixed,\n  onKeyUp?: (e: KeyboardEvent) => mixed,\n  onKeyDown?: (e: KeyboardEvent) => mixed,\n\n  // Props for the hightlighted code’s pre element\n  preClassName?: string,\n};\n\ntype State = {\n  capture: boolean,\n};\n\ntype Record = {\n  value: string,\n  selectionStart: number,\n  selectionEnd: number,\n};\n\ntype History = {\n  stack: Array<Record & { timestamp: number }>,\n  offset: number,\n};\n\nconst KEYCODE_ENTER = 13;\nconst KEYCODE_TAB = 9;\nconst KEYCODE_BACKSPACE = 8;\nconst KEYCODE_Y = 89;\nconst KEYCODE_Z = 90;\nconst KEYCODE_M = 77;\nconst KEYCODE_PARENS = 57;\nconst KEYCODE_BRACKETS = 219;\nconst KEYCODE_QUOTE = 222;\nconst KEYCODE_BACK_QUOTE = 192;\nconst KEYCODE_ESCAPE = 27;\n\nconst HISTORY_LIMIT = 100;\nconst HISTORY_TIME_GAP = 3000;\n\nconst isWindows = \"navigator\" in global && /Win/i.test(navigator.platform);\nconst isMacLike =\n  \"navigator\" in global && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\n\nconst className = \"npm__react-simple-code-editor__textarea\";\n\nconst cssText = /* CSS */ `\n/**\n * Reset the text fill color so that placeholder is visible\n */\n.${className}:empty {\n  -webkit-text-fill-color: inherit !important;\n}\n\n/**\n * Hack to apply on some CSS on IE10 and IE11\n */\n@media all and (-ms-high-contrast: none), (-ms-high-contrast: active) {\n  /**\n    * IE doesn't support '-webkit-text-fill-color'\n    * So we use 'color: transparent' to make the text transparent on IE\n    * Unlike other browsers, it doesn't affect caret color in IE\n    */\n  .${className} {\n    color: transparent !important;\n  }\n\n  .${className}::selection {\n    background-color: #accef7 !important;\n    color: transparent !important;\n  }\n}\n`;\n\nexport default class Editor extends React.Component<Props, State> {\n  static defaultProps = {\n    tabSize: 2,\n    insertSpaces: true,\n    ignoreTabKey: false,\n    padding: 0,\n  };\n\n  state = {\n    capture: true,\n  };\n\n  componentDidMount() {\n    this._recordCurrentState();\n  }\n\n  _recordCurrentState = () => {\n    const input = this._input;\n\n    if (!input) return;\n\n    // Save current state of the input\n    const { value, selectionStart, selectionEnd } = input;\n\n    this._recordChange({\n      value,\n      selectionStart,\n      selectionEnd,\n    });\n  };\n\n  _getLines = (text: string, position: number) =>\n    text.substring(0, position).split(\"\\n\");\n\n  _recordChange = (record: Record, overwrite?: boolean = false) => {\n    const { stack, offset } = this._history;\n\n    if (stack.length && offset > -1) {\n      // When something updates, drop the redo operations\n      this._history.stack = stack.slice(0, offset + 1);\n\n      // Limit the number of operations to 100\n      const count = this._history.stack.length;\n\n      if (count > HISTORY_LIMIT) {\n        const extras = count - HISTORY_LIMIT;\n\n        this._history.stack = stack.slice(extras, count);\n        this._history.offset = Math.max(this._history.offset - extras, 0);\n      }\n    }\n\n    const timestamp = Date.now();\n\n    if (overwrite) {\n      const last = this._history.stack[this._history.offset];\n\n      if (last && timestamp - last.timestamp < HISTORY_TIME_GAP) {\n        // A previous entry exists and was in short interval\n\n        // Match the last word in the line\n        const re = /[^a-z0-9]([a-z0-9]+)$/i;\n\n        // Get the previous line\n        const previous = this._getLines(last.value, last.selectionStart)\n          .pop()\n          .match(re);\n\n        // Get the current line\n        const current = this._getLines(record.value, record.selectionStart)\n          .pop()\n          .match(re);\n\n        if (previous && current && current[1].startsWith(previous[1])) {\n          // The last word of the previous line and current line match\n          // Overwrite previous entry so that undo will remove whole word\n          this._history.stack[this._history.offset] = { ...record, timestamp };\n\n          return;\n        }\n      }\n    }\n\n    // Add the new operation to the stack\n    this._history.stack.push({ ...record, timestamp });\n    this._history.offset++;\n  };\n\n  _updateInput = (record: Record) => {\n    const input = this._input;\n\n    if (!input) return;\n\n    // Update values and selection state\n    input.value = record.value;\n    input.selectionStart = record.selectionStart;\n    input.selectionEnd = record.selectionEnd;\n\n    this.props.onValueChange(record.value);\n  };\n\n  _applyEdits = (record: Record) => {\n    // Save last selection state\n    const input = this._input;\n    const last = this._history.stack[this._history.offset];\n\n    if (last && input) {\n      this._history.stack[this._history.offset] = {\n        ...last,\n        selectionStart: input.selectionStart,\n        selectionEnd: input.selectionEnd,\n      };\n    }\n\n    // Save the changes\n    this._recordChange(record);\n    this._updateInput(record);\n  };\n\n  _undoEdit = () => {\n    const { stack, offset } = this._history;\n\n    // Get the previous edit\n    const record = stack[offset - 1];\n\n    if (record) {\n      // Apply the changes and update the offset\n      this._updateInput(record);\n      this._history.offset = Math.max(offset - 1, 0);\n    }\n  };\n\n  _redoEdit = () => {\n    const { stack, offset } = this._history;\n\n    // Get the next edit\n    const record = stack[offset + 1];\n\n    if (record) {\n      // Apply the changes and update the offset\n      this._updateInput(record);\n      this._history.offset = Math.min(offset + 1, stack.length - 1);\n    }\n  };\n\n  _handleKeyDown = (e: *) => {\n    const { tabSize, insertSpaces, ignoreTabKey, onKeyDown } = this.props;\n\n    if (onKeyDown) {\n      onKeyDown(e);\n\n      if (e.defaultPrevented) {\n        return;\n      }\n    }\n\n    if (e.keyCode === KEYCODE_ESCAPE) {\n      e.target.blur();\n    }\n\n    const { value, selectionStart, selectionEnd } = e.target;\n\n    const tabCharacter = (insertSpaces ? \" \" : \"\\t\").repeat(tabSize);\n\n    if (e.keyCode === KEYCODE_TAB && !ignoreTabKey && this.state.capture) {\n      // Prevent focus change\n      e.preventDefault();\n\n      if (e.shiftKey) {\n        // Unindent selected lines\n        const linesBeforeCaret = this._getLines(value, selectionStart);\n        const startLine = linesBeforeCaret.length - 1;\n        const endLine = this._getLines(value, selectionEnd).length - 1;\n        const nextValue = value\n          .split(\"\\n\")\n          .map((line, i) => {\n            if (\n              i >= startLine &&\n              i <= endLine &&\n              line.startsWith(tabCharacter)\n            ) {\n              return line.substring(tabCharacter.length);\n            }\n\n            return line;\n          })\n          .join(\"\\n\");\n\n        if (value !== nextValue) {\n          const startLineText = linesBeforeCaret[startLine];\n\n          this._applyEdits({\n            value: nextValue,\n            // Move the start cursor if first line in selection was modified\n            // It was modified only if it started with a tab\n            selectionStart: startLineText.startsWith(tabCharacter)\n              ? selectionStart - tabCharacter.length\n              : selectionStart,\n            // Move the end cursor by total number of characters removed\n            selectionEnd: selectionEnd - (value.length - nextValue.length),\n          });\n        }\n      } else if (selectionStart !== selectionEnd) {\n        // Indent selected lines\n        const linesBeforeCaret = this._getLines(value, selectionStart);\n        const startLine = linesBeforeCaret.length - 1;\n        const endLine = this._getLines(value, selectionEnd).length - 1;\n        const startLineText = linesBeforeCaret[startLine];\n\n        this._applyEdits({\n          value: value\n            .split(\"\\n\")\n            .map((line, i) => {\n              if (i >= startLine && i <= endLine) {\n                return tabCharacter + line;\n              }\n\n              return line;\n            })\n            .join(\"\\n\"),\n          // Move the start cursor by number of characters added in first line of selection\n          // Don't move it if it there was no text before cursor\n          selectionStart: /\\S/.test(startLineText)\n            ? selectionStart + tabCharacter.length\n            : selectionStart,\n          // Move the end cursor by total number of characters added\n          selectionEnd:\n            selectionEnd + tabCharacter.length * (endLine - startLine + 1),\n        });\n      } else {\n        const updatedSelection = selectionStart + tabCharacter.length;\n\n        this._applyEdits({\n          // Insert tab character at caret\n          value:\n            value.substring(0, selectionStart) +\n            tabCharacter +\n            value.substring(selectionEnd),\n          // Update caret position\n          selectionStart: updatedSelection,\n          selectionEnd: updatedSelection,\n        });\n      }\n    } else if (e.keyCode === KEYCODE_BACKSPACE) {\n      const hasSelection = selectionStart !== selectionEnd;\n      const textBeforeCaret = value.substring(0, selectionStart);\n\n      if (textBeforeCaret.endsWith(tabCharacter) && !hasSelection) {\n        // Prevent default delete behaviour\n        e.preventDefault();\n\n        const updatedSelection = selectionStart - tabCharacter.length;\n\n        this._applyEdits({\n          // Remove tab character at caret\n          value:\n            value.substring(0, selectionStart - tabCharacter.length) +\n            value.substring(selectionEnd),\n          // Update caret position\n          selectionStart: updatedSelection,\n          selectionEnd: updatedSelection,\n        });\n      }\n    } else if (e.keyCode === KEYCODE_ENTER) {\n      // Ignore selections\n      if (selectionStart === selectionEnd) {\n        // Get the current line\n        const line = this._getLines(value, selectionStart).pop();\n        const matches = line.match(/^\\s+/);\n\n        if (matches && matches[0]) {\n          e.preventDefault();\n\n          // Preserve indentation on inserting a new line\n          const indent = \"\\n\" + matches[0];\n          const updatedSelection = selectionStart + indent.length;\n\n          this._applyEdits({\n            // Insert indentation character at caret\n            value:\n              value.substring(0, selectionStart) +\n              indent +\n              value.substring(selectionEnd),\n            // Update caret position\n            selectionStart: updatedSelection,\n            selectionEnd: updatedSelection,\n          });\n        }\n      }\n    } else if (\n      e.keyCode === KEYCODE_PARENS ||\n      e.keyCode === KEYCODE_BRACKETS ||\n      e.keyCode === KEYCODE_QUOTE ||\n      e.keyCode === KEYCODE_BACK_QUOTE\n    ) {\n      let chars;\n\n      if (e.keyCode === KEYCODE_PARENS && e.shiftKey) {\n        chars = [\"(\", \")\"];\n      } else if (e.keyCode === KEYCODE_BRACKETS) {\n        if (e.shiftKey) {\n          chars = [\"{\", \"}\"];\n        } else {\n          chars = [\"[\", \"]\"];\n        }\n      } else if (e.keyCode === KEYCODE_QUOTE) {\n        if (e.shiftKey) {\n          chars = ['\"', '\"'];\n        } else {\n          chars = [\"'\", \"'\"];\n        }\n      } else if (e.keyCode === KEYCODE_BACK_QUOTE && !e.shiftKey) {\n        chars = [\"`\", \"`\"];\n      }\n\n      // If text is selected, wrap them in the characters\n      if (selectionStart !== selectionEnd && chars) {\n        e.preventDefault();\n\n        this._applyEdits({\n          value:\n            value.substring(0, selectionStart) +\n            chars[0] +\n            value.substring(selectionStart, selectionEnd) +\n            chars[1] +\n            value.substring(selectionEnd),\n          // Update caret position\n          selectionStart,\n          selectionEnd: selectionEnd + 2,\n        });\n      }\n    } else if (\n      (isMacLike\n        ? // Trigger undo with ⌘+Z on Mac\n          e.metaKey && e.keyCode === KEYCODE_Z\n        : // Trigger undo with Ctrl+Z on other platforms\n          e.ctrlKey && e.keyCode === KEYCODE_Z) &&\n      !e.shiftKey &&\n      !e.altKey\n    ) {\n      e.preventDefault();\n\n      this._undoEdit();\n    } else if (\n      (isMacLike\n        ? // Trigger redo with ⌘+Shift+Z on Mac\n          e.metaKey && e.keyCode === KEYCODE_Z && e.shiftKey\n        : isWindows\n        ? // Trigger redo with Ctrl+Y on Windows\n          e.ctrlKey && e.keyCode === KEYCODE_Y\n        : // Trigger redo with Ctrl+Shift+Z on other platforms\n          e.ctrlKey && e.keyCode === KEYCODE_Z && e.shiftKey) &&\n      !e.altKey\n    ) {\n      e.preventDefault();\n\n      this._redoEdit();\n    } else if (\n      e.keyCode === KEYCODE_M &&\n      e.ctrlKey &&\n      (isMacLike ? e.shiftKey : true)\n    ) {\n      e.preventDefault();\n\n      // Toggle capturing tab key so users can focus away\n      this.setState((state) => ({\n        capture: !state.capture,\n      }));\n    }\n  };\n\n  _handleChange = (e: *) => {\n    const { value, selectionStart, selectionEnd } = e.target;\n\n    this._recordChange(\n      {\n        value,\n        selectionStart,\n        selectionEnd,\n      },\n      true\n    );\n\n    this.props.onValueChange(value);\n  };\n\n  _history: History = {\n    stack: [],\n    offset: -1,\n  };\n\n  _input: ?HTMLTextAreaElement;\n\n  get session() {\n    return {\n      history: this._history,\n    };\n  }\n\n  set session(session: { history: History }) {\n    this._history = session.history;\n  }\n\n  render() {\n    const {\n      value,\n      style,\n      padding,\n      highlight,\n      textareaId,\n      textareaClassName,\n      autoFocus,\n      disabled,\n      form,\n      maxLength,\n      minLength,\n      name,\n      placeholder,\n      readOnly,\n      required,\n      onClick,\n      onFocus,\n      onBlur,\n      onKeyUp,\n      /* eslint-disable no-unused-vars */\n      onKeyDown,\n      onValueChange,\n      onSelect,\n      tabSize,\n      insertSpaces,\n      ignoreTabKey,\n      /* eslint-enable no-unused-vars */\n      preClassName,\n      ...rest\n    } = this.props;\n\n    const contentStyle = {\n      paddingTop: padding,\n      paddingRight: padding,\n      paddingBottom: padding,\n      paddingLeft: padding,\n    };\n\n    const highlighted = highlight(value);\n\n    return (\n      <div {...rest} style={{ ...styles.container, ...style }}>\n        <textarea\n          ref={(c) => (this._input = c)}\n          style={{\n            ...styles.editor,\n            ...styles.textarea,\n            ...contentStyle,\n          }}\n          className={\n            className + (textareaClassName ? ` ${textareaClassName}` : \"\")\n          }\n          id={textareaId}\n          value={value}\n          onChange={this._handleChange}\n          onSelect={onSelect}\n          onKeyDown={this._handleKeyDown}\n          onClick={onClick}\n          onKeyUp={onKeyUp}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          disabled={disabled}\n          form={form}\n          maxLength={maxLength}\n          minLength={minLength}\n          name={name}\n          placeholder={placeholder}\n          readOnly={readOnly}\n          required={required}\n          autoFocus={autoFocus}\n          autoCapitalize=\"off\"\n          autoComplete=\"off\"\n          autoCorrect=\"off\"\n          spellCheck={false}\n          data-gramm={false}\n        />\n        <pre\n          className={preClassName}\n          aria-hidden=\"true\"\n          style={{ ...styles.editor, ...styles.highlight, ...contentStyle }}\n          {...(typeof highlighted === \"string\"\n            ? { dangerouslySetInnerHTML: { __html: highlighted + \"<br />\" } }\n            : { children: highlighted })}\n        />\n        {/* eslint-disable-next-line react/no-danger */}\n        <style type=\"text/css\" dangerouslySetInnerHTML={{ __html: cssText }} />\n      </div>\n    );\n  }\n}\n\nexport const styles = {\n  container: {\n    position: \"relative\",\n    textAlign: \"left\",\n    boxSizing: \"border-box\",\n    padding: 0,\n    overflow: \"hidden\",\n  },\n  textarea: {\n    position: \"absolute\",\n    top: 0,\n    left: 0,\n    height: \"100%\",\n    width: \"100%\",\n    resize: \"none\",\n    color: \"inherit\",\n    overflow: \"hidden\",\n    MozOsxFontSmoothing: \"grayscale\",\n    WebkitFontSmoothing: \"antialiased\",\n    WebkitTextFillColor: \"transparent\",\n  },\n  highlight: {\n    position: \"relative\",\n    pointerEvents: \"none\",\n  },\n  editor: {\n    margin: 0,\n    border: 0,\n    background: \"none\",\n    boxSizing: \"inherit\",\n    display: \"inherit\",\n    fontFamily: \"inherit\",\n    fontSize: \"inherit\",\n    fontStyle: \"inherit\",\n    fontVariantLigatures: \"inherit\",\n    fontWeight: \"inherit\",\n    letterSpacing: \"inherit\",\n    lineHeight: \"inherit\",\n    tabSize: \"inherit\",\n    textIndent: \"inherit\",\n    textRendering: \"inherit\",\n    textTransform: \"inherit\",\n    whiteSpace: \"pre-wrap\",\n    wordBreak: \"keep-all\",\n    overflowWrap: \"break-word\",\n  },\n};\n"],"sourceRoot":""}